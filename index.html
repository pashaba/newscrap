<!DOCTYPE html>
<html>
<head>
    <title>Web Inspector - Simple Version</title>
    <meta charset="UTF-8">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; padding: 20px; background: #f0f2f5; }
        .container { max-width: 1200px; margin: 0 auto; background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { color: #333; margin-bottom: 20px; text-align: center; }
        .input-group { display: flex; gap: 10px; margin-bottom: 20px; }
        input { flex: 1; padding: 12px; border: 1px solid #ddd; border-radius: 5px; font-size: 16px; }
        button { padding: 12px 24px; background: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; }
        button:hover { background: #45a049; }
        .tabs { display: flex; background: #f8f9fa; border-radius: 5px; margin-bottom: 20px; overflow-x: auto; }
        .tab { padding: 15px 20px; cursor: pointer; border-bottom: 3px solid transparent; }
        .tab.active { background: white; border-bottom: 3px solid #4CAF50; }
        .content { background: white; padding: 20px; border-radius: 5px; min-height: 500px; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        pre { background: #f8f9fa; padding: 15px; border-radius: 5px; overflow-x: auto; max-height: 600px; }
        .loading { text-align: center; padding: 50px; }
        .spinner { border: 4px solid #f3f3f3; border-top: 4px solid #4CAF50; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 0 auto 20px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .error { background: #ffebee; color: #c62828; padding: 15px; border-radius: 5px; margin: 10px 0; }
        .stats { background: #e8f5e8; padding: 15px; border-radius: 5px; margin-bottom: 15px; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th, td { padding: 10px; text-align: left; border-bottom: 1px solid #ddd; }
        th { background: #f5f5f5; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç Web Inspector</h1>
        
        <div class="input-group">
            <input type="url" id="urlInput" placeholder="https://example.com" value="https://">
            <button onclick="inspectWebsite()">Analisis</button>
        </div>
        
        <div class="tabs">
            <div class="tab active" onclick="showTab('html')">HTML</div>
            <div class="tab" onclick="showTab('js')">JavaScript</div>
            <div class="tab" onclick="showTab('css')">CSS</div>
            <div class="tab" onclick="showTab('links')">Links</div>
            <div class="tab" onclick="showTab('info')">Info</div>
        </div>
        
        <div class="content">
            <!-- Loading -->
            <div id="loading" class="loading" style="display: none;">
                <div class="spinner"></div>
                <p>Loading...</p>
            </div>
            
            <!-- Error -->
            <div id="error" class="error" style="display: none;"></div>
            
            <!-- HTML Tab -->
            <div id="htmlTab" class="tab-content active">
                <div class="stats" id="htmlStats"></div>
                <pre><code id="htmlCode">Masukkan URL dan klik Analisis</code></pre>
            </div>
            
            <!-- JavaScript Tab -->
            <div id="jsTab" class="tab-content">
                <div class="stats" id="jsStats"></div>
                <pre><code id="jsCode">Tidak ada JavaScript</code></pre>
            </div>
            
            <!-- CSS Tab -->
            <div id="cssTab" class="tab-content">
                <div class="stats" id="cssStats"></div>
                <pre><code id="cssCode">Tidak ada CSS</code></pre>
            </div>
            
            <!-- Links Tab -->
            <div id="linksTab" class="tab-content">
                <div id="linksContent">
                    <p>Masukkan URL dan klik Analisis</p>
                </div>
            </div>
            
            <!-- Info Tab -->
            <div id="infoTab" class="tab-content">
                <div id="infoContent">
                    <h3>Cara Menggunakan:</h3>
                    <p>1. Masukkan URL website (contoh: https://example.com)</p>
                    <p>2. Klik tombol "Analisis"</p>
                    <p>3. Tunggu hingga proses selesai</p>
                    <p>4. Pilih tab untuk melihat hasil analisis</p>
                    
                    <h3 style="margin-top: 20px;">Tips:</h3>
                    <p>‚Ä¢ Gunakan website yang mengizinkan CORS</p>
                    <p>‚Ä¢ Contoh URL: https://httpbin.org/html</p>
                    <p>‚Ä¢ Website dengan proteksi ketat mungkin akan error</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Fungsi utama untuk menganalisis website
        async function inspectWebsite() {
            const url = document.getElementById('urlInput').value.trim();
            
            // Validasi URL
            if (!url || url === 'https://') {
                showError('Masukkan URL yang valid (contoh: https://example.com)');
                return;
            }
            
            if (!url.startsWith('http://') && !url.startsWith('https://')) {
                showError('URL harus dimulai dengan http:// atau https://');
                return;
            }
            
            try {
                // Tampilkan loading
                document.getElementById('loading').style.display = 'block';
                document.getElementById('error').style.display = 'none';
                
                console.log('Mencoba mengambil:', url);
                
                // Coba beberapa metode
                const html = await fetchWithRetry(url);
                
                console.log('Berhasil mendapatkan HTML, panjang:', html.length);
                
                // Analisis HTML
                analyzeHTML(html);
                
                // Sembunyikan loading
                document.getElementById('loading').style.display = 'none';
                
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('loading').style.display = 'none';
                showError('Gagal mengambil website: ' + error.message);
            }
        }
        
        // Fungsi untuk fetch dengan retry
        async function fetchWithRetry(url) {
            const proxies = [
                'https://corsproxy.io/?',
                'https://api.allorigins.win/raw?url=',
                'https://api.codetabs.com/v1/proxy/?quest='
            ];
            
            for (let i = 0; i < proxies.length; i++) {
                try {
                    const proxyUrl = proxies[i] + encodeURIComponent(url);
                    console.log('Mencoba proxy ke-' + (i+1) + ':', proxyUrl);
                    
                    const response = await fetch(proxyUrl, {
                        headers: {
                            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'
                        }
                    });
                    
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}`);
                    }
                    
                    const text = await response.text();
                    
                    if (text && text.length > 0) {
                        console.log('Berhasil dengan proxy ke-' + (i+1));
                        return text;
                    }
                    
                } catch (error) {
                    console.log('Proxy ke-' + (i+1) + ' gagal:', error.message);
                    // Lanjut ke proxy berikutnya
                }
            }
            
            throw new Error('Semua proxy gagal');
        }
        
        // Fungsi untuk menganalisis HTML
        function analyzeHTML(html) {
            try {
                // Parse HTML
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                
                // Update HTML tab
                updateHTMLTab(html, doc);
                
                // Update JavaScript tab
                updateJavaScriptTab(doc);
                
                // Update CSS tab
                updateCSSTab(doc);
                
                // Update Links tab
                updateLinksTab(doc);
                
            } catch (error) {
                console.error('Error analisis:', error);
                showError('Error menganalisis HTML: ' + error.message);
            }
        }
        
        // Update HTML tab
        function updateHTMLTab(html, doc) {
            // Format HTML sederhana
            const formatted = formatHTML(html);
            document.getElementById('htmlCode').textContent = formatted;
            
            // Stats
            const stats = `
                <strong>Statistik HTML:</strong><br>
                ‚Ä¢ Karakter: ${html.length.toLocaleString()}<br>
                ‚Ä¢ Elemen: ${doc.querySelectorAll('*').length.toLocaleString()}<br>
                ‚Ä¢ Title: ${doc.title || 'Tidak ada'}<br>
                ‚Ä¢ Doctype: ${doc.doctype ? 'Ya' : 'Tidak'}
            `;
            document.getElementById('htmlStats').innerHTML = stats;
        }
        
        // Update JavaScript tab
        function updateJavaScriptTab(doc) {
            const scripts = doc.querySelectorAll('script');
            let jsCode = '';
            let external = 0;
            let inline = 0;
            
            scripts.forEach(script => {
                if (script.src) {
                    external++;
                    jsCode += `// External: ${script.src}\n\n`;
                } else if (script.textContent && script.textContent.trim()) {
                    inline++;
                    jsCode += script.textContent.trim() + '\n\n';
                }
            });
            
            document.getElementById('jsCode').textContent = jsCode || '// Tidak ada JavaScript';
            
            const stats = `
                <strong>Statistik JavaScript:</strong><br>
                ‚Ä¢ Total Scripts: ${scripts.length}<br>
                ‚Ä¢ External: ${external}<br>
                ‚Ä¢ Inline: ${inline}
            `;
            document.getElementById('jsStats').innerHTML = stats;
        }
        
        // Update CSS tab
        function updateCSSTab(doc) {
            const styles = doc.querySelectorAll('style, link[rel="stylesheet"]');
            let cssCode = '';
            let external = 0;
            let inline = 0;
            
            styles.forEach(style => {
                if (style.tagName === 'STYLE' && style.textContent && style.textContent.trim()) {
                    inline++;
                    cssCode += style.textContent.trim() + '\n\n';
                } else if (style.href) {
                    external++;
                    cssCode += `/* External: ${style.href} */\n\n`;
                }
            });
            
            document.getElementById('cssCode').textContent = cssCode || '/* Tidak ada CSS */';
            
            const stats = `
                <strong>Statistik CSS:</strong><br>
                ‚Ä¢ Total Styles: ${styles.length}<br>
                ‚Ä¢ External: ${external}<br>
                ‚Ä¢ Inline: ${inline}
            `;
            document.getElementById('cssStats').innerHTML = stats;
        }
        
        // Update Links tab
        function updateLinksTab(doc) {
            const links = doc.querySelectorAll('a[href]');
            let linksHTML = '';
            
            if (links.length > 0) {
                linksHTML = `
                    <table>
                        <tr><th>No</th><th>Text</th><th>URL</th></tr>
                        ${Array.from(links).map((link, index) => `
                            <tr>
                                <td>${index + 1}</td>
                                <td>${link.textContent.substring(0, 50)}${link.textContent.length > 50 ? '...' : ''}</td>
                                <td>${link.href}</td>
                            </tr>
                        `).join('')}
                    </table>
                `;
            } else {
                linksHTML = '<p>Tidak ada link ditemukan</p>';
            }
            
            document.getElementById('linksContent').innerHTML = linksHTML;
        }
        
        // Fungsi helper
        function formatHTML(html) {
            // Format sederhana
            let result = '';
            let indent = 0;
            
            // Split by tags
            const parts = html.split(/(<[^>]+>)/g);
            
            for (const part of parts) {
                if (part.startsWith('</')) {
                    indent = Math.max(0, indent - 1);
                }
                
                result += '  '.repeat(indent) + part + '\n';
                
                if (part.startsWith('<') && !part.startsWith('</') && 
                    !part.startsWith('<!') && !part.endsWith('/>')) {
                    indent++;
                }
            }
            
            return result;
        }
        
        function showError(message) {
            document.getElementById('error').textContent = message;
            document.getElementById('error').style.display = 'block';
        }
        
        function showTab(tabName) {
            // Sembunyikan semua tab
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Tampilkan tab yang dipilih
            document.getElementById(tabName + 'Tab').classList.add('active');
            
            // Update tab button
            event.target.classList.add('active');
        }
        
        // Event listener untuk Enter key
        document.getElementById('urlInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                inspectWebsite();
            }
        });
        
        // Auto-focus
        document.getElementById('urlInput').focus();
    </script>
</body>
</html>
